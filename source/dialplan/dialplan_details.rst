*****************
Dialplan Details
*****************


Global
-------

Global specific dialplans are global to all tennants(domains). These can be changed, however the changes apply to all tennants.



Caller-Details
^^^^^^^^^^^^^^^^

+---------------------+----------------------+-----------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                          | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+===============================================+=======================+========================+=======================+=======================+
| condition           |                      |                                               | never                 |                        | 0                     | 5                     |
+---------------------+----------------------+-----------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | caller_destination=${destination_number}      |                       | TRUE                   | 0                     | 10                    |
+---------------------+----------------------+-----------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | caller_id_name=${caller_id_name}              |                       | TRUE                   | 0                     | 15                    |
+---------------------+----------------------+-----------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | caller_id_number=${caller_id_number}          |                       | TRUE                   | 0                     | 20                    |
+---------------------+----------------------+-----------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Not Found
^^^^^^^^^^^


+---------------------+----------------------+-------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                  | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+=======================================================+=======================+========================+=======================+=======================+
| condition           |                      |                                                       |                       |                        | 0                     | 5                     |
+---------------------+----------------------+-------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | call_direction=inbound                                |                       | TRUE                   | 0                     | 10                    |
+---------------------+----------------------+-------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | log                  | [inbound routes] 404 not found ${sip_network_ip}      |                       | TRUE                   | 0                     | 15                    |
+---------------------+----------------------+-------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Call Forward All
^^^^^^^^^^^^^^^^^^

+---------------------+-----------------------------+--------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type        | Dialplan Detail Data                                   | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+=============================+========================================================+=======================+========================+=======================+=======================+
| condition           | ${user_exists}              | TRUE                                                   |                       |                        | 0                     | 5                     |
+---------------------+-----------------------------+--------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | ${forward_all_enabled}      | TRUE                                                   |                       |                        | 0                     | 10                    |
+---------------------+-----------------------------+--------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | transfer                    | ${forward_all_destination} XML ${domain_name}          |                       |                        | 0                     | 15                    |
+---------------------+-----------------------------+--------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Intercept Ext Polycom
^^^^^^^^^^^^^^^^^^^^^^

+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data            | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+=================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*97(\d+)$                     |                       |                        | 0                     | 5                     |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                 |                       |                        | 0                     | 10                    |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | intercept.lua $1                |                       |                        | 0                     | 15                    |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Talking Clock Date
^^^^^^^^^^^^^^^^^^^

+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                              | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+===================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*9171$                                                          |                       |                        | 0                     | 5                     |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                                                   |                       |                        | 0                     | 10                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | sleep                | 1000                                                              |                       |                        | 0                     | 15                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | say                  | ${default_language} CURRENT_DATE pronounced ${strepoch()}         |                       |                        | 0                     | 20                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | hangup               |                                                                   |                       |                        | 0                     | 25                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Talking Clock Date And Time
^^^^^^^^^^^^^^^^^^^^^^^^^^^^


+---------------------+----------------------+-------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                                    | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+=========================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*9172$                                                                |                       |                        | 0                     | 5                     |
+---------------------+----------------------+-------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                                                         |                       |                        | 0                     | 10                    |
+---------------------+----------------------+-------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | sleep                | 1000                                                                    |                       |                        | 0                     | 15                    |
+---------------------+----------------------+-------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | say                  | ${default_language} CURRENT_DATE_TIME pronounced ${strepoch()}          |                       |                        | 0                     | 20                    |
+---------------------+----------------------+-------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | hangup               |                                                                         |                       |                        | 0                     | 25                    |
+---------------------+----------------------+-------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Outbound Route Example
^^^^^^^^^^^^^^^^^^^^^^^^


+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                             | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+==================================================================+=======================+========================+=======================+=======================+
| condition           | ${user_exists}       | FALSE                                                            |                       |                        | 0                     | 0                     |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^\+?1?(\d{10})$                                                  |                       |                        | 0                     | 10                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | sip_h_X-accountcode=${accountcode}                               |                       |                        | 0                     | 20                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | export               | call_direction=outbound                                          |                       |                        | 0                     | 30                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | unset                | call_timeout                                                     |                       |                        | 0                     | 40                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | hangup_after_bridge=true                                         |                       |                        | 0                     | 50                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | effective_caller_id_name=${outbound_caller_id_name}              |                       |                        | 0                     | 60                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | effective_caller_id_number=${outbound_caller_id_number}          |                       |                        | 0                     | 70                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | inherit_codec=true                                               |                       |                        | 0                     | 80                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | ignore_display_updates=true                                      |                       |                        | 0                     | 90                    |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | callee_id_number=$1                                              |                       |                        | 0                     | 100                   |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | continue_on_fail=true                                            |                       |                        | 0                     | 110                   |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | bridge               | sofia/gateway/72d236fb-945b-4c86-8e75-af7c6bcf2862/$1            |                       |                        | 0                     | 120                   |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | bridge               | sofia/gateway/72d236fb-945b-4c86-8e75-af7c6bcf2862/$1            |                       |                        | 0                     | 130                   |
+---------------------+----------------------+------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Talking Clock Time
^^^^^^^^^^^^^^^^^^^^

+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                              | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+===================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*9170$                                                          |                       |                        | 0                     | 5                     |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                                                   |                       |                        | 0                     | 10                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | sleep                | 1000                                                              |                       |                        | 0                     | 15                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | say                  | ${default_language} CURRENT_TIME pronounced ${strepoch()}         |                       |                        | 0                     | 20                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | hangup               |                                                                   |                       |                        | 0                     | 25                    |
+---------------------+----------------------+-------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+

|
|

--------------------------------------------------------------------------------------------------

|
|

Domain Specific
----------------

Domain specific dialplans are all the same initially but can be changed.  Those changes are per domain, thus helps FusionPBX acheive multitennancy.


Hold Music
^^^^^^^^^^^

+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type   | Dialplan Detail Data                                            | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+========================+=================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number     | ^\*9664$                                                        |                       |                        | 0                     | 5                     |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | ${sip_has_crypto}      | ^(AES_CM_128_HMAC_SHA1_32|AES_CM_128_HMAC_SHA1_80)$             |                       |                        | 0                     | 10                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer                 |                                                                 |                       |                        | 0                     | 15                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | execute_extension      | is_secure XML ${context}                                        |                       |                        | 0                     | 20                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | playback               | $${hold_music}                                                  |                       |                        | 0                     | 25                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | set                    | zrtp_secure_media=true                                          |                       |                        | 0                     | 30                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | answer                 |                                                                 |                       |                        | 0                     | 35                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | playback               | silence_stream://2000                                           |                       |                        | 0                     | 40                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | execute_extension      | is_zrtp_secure XML ${context}                                   |                       |                        | 0                     | 45                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | playback               | $${hold_music}                                                  |                       |                        | 0                     | 50                    |
+---------------------+------------------------+-----------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Provision
^^^^^^^^^^

+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+======================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*11$               | on-true               |                        | 0                     | 5                     |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | reboot=true          |                       |                        | 0                     | 10                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | action=login         |                       |                        | 0                     | 15                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | app.lua provision    |                       |                        | 0                     | 20                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^\*12$               |                       |                        | 1                     | 30                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | reboot=true          |                       |                        | 1                     | 35                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | action=logout        |                       |                        | 1                     | 40                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | app.lua provision    |                       |                        | 1                     | 45                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+



Call Forward
^^^^^^^^^^^^^^

+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                                                                 | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+======================================================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*72$                                                                                               | on-true               |                        | 0                     | 5                     |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | request_id=false                                                                                     |                       |                        | 0                     | 10                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=true                                                                                         |                       |                        | 0                     | 15                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | call_forward.lua                                                                                     |                       |                        | 0                     | 20                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^\*73$                                                                                               | on-true               |                        | 1                     | 30                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | request_id=false                                                                                     |                       |                        | 1                     | 35                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=false                                                                                        |                       |                        | 1                     | 40                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | call_forward.lua                                                                                     |                       |                        | 1                     | 45                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^\*74$                                                                                               | on-true               |                        | 2                     | 55                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | request_id=false                                                                                     |                       |                        | 2                     | 60                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=toggle                                                                                       |                       |                        | 2                     | 65                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | call_forward.lua                                                                                     |                       |                        | 2                     | 70                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^forward\+(\Q${caller_id_number}\E)(?:\/(\d+))?$                                                     | on-true               |                        | 3                     | 80                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=toggle                                                                                       |                       |                        | 3                     | 85                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | forward_all_destination=$2                                                                           |                       |                        | 3                     | 90                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | call_forward.lua                                                                                     |                       |                        | 3                     | 95                    |
+---------------------+----------------------+------------------------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Do Not Disturb
^^^^^^^^^^^^^^^

+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                       | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+============================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*77$                                     | on-true               |                        | 0                     | 5                     |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=toggle                             |                       |                        | 0                     | 10                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | do_not_disturb.lua                         |                       |                        | 0                     | 15                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^\*78$|\*363$                              | on-true               |                        | 1                     | 25                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=true                               |                       |                        | 1                     | 30                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | do_not_disturb.lua                         |                       |                        | 1                     | 35                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^\*79$                                     | on-true               |                        | 2                     | 45                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=false                              |                       |                        | 2                     | 50                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | do_not_disturb.lua                         |                       |                        | 2                     | 55                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^dnd\+${caller_id_number}$                 | on-true               |                        | 3                     | 65                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | enabled=toggle                             |                       |                        | 3                     | 70                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | do_not_disturb.lua                         |                       |                        | 3                     | 75                    |
+---------------------+----------------------+--------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+




Voicemail(Vmain User)
^^^^^^^^^^

+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                   | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+========================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*97$                                 |                       |                        | 0                     | 5                     |
+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                        |                       |                        | 0                     | 10                    |
+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | sleep                | 1000                                   |                       |                        | 0                     | 15                    |
+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_action=check                 |                       |                        | 0                     | 20                    |
+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_id=${caller_id_number}       |                       |                        | 0                     | 25                    |
+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_profile=default              |                       |                        | 0                     | 30                    |
+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | app.lua voicemail                      |                       |                        | 0                     | 35                    |
+---------------------+----------------------+----------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+

Vmain
^^^^^^

+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                                   | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+========================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^vmain$|^\*4000$|^\*98$                                                | never                 |                        | 0                     | 5                     |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                                                        |                       |                        | 0                     | 10                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | sleep                | 1000                                                                   |                       |                        | 0                     | 15                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_action=check                                                 |                       |                        | 0                     | 20                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_profile=default                                              |                       |                        | 0                     | 25                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | app.lua voicemail                                                      |                       |                        | 0                     | 30                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number   | ^(vmain$|^\*4000$|^\*98)(\d{2,12})$                                    |                       |                        | 1                     | 40                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                                                        |                       |                        | 1                     | 45                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | sleep                | 1000                                                                   |                       |                        | 1                     | 50                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_action=check                                                 |                       |                        | 1                     | 55                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_id=$2                                                        |                       |                        | 1                     | 60                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_profile=default                                              |                       |                        | 1                     | 65                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | voicemail_authorized=false                                             |                       |                        | 1                     | 70                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | app.lua voicemail                                                      |                       |                        | 1                     | 75                    |
+---------------------+----------------------+------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Directory
^^^^^^^^^^

+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+======================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*411$              |                       |                        | 0                     | 5                     |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | directory.lua        |                       |                        | 0                     | 10                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+



Follow Me
^^^^^^^^^^

+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+======================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*21$               |                       |                        | 0                     | 5                     |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                      |                       |                        | 0                     | 10                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | follow_me.lua        |                       |                        | 0                     | 15                    |
+---------------------+----------------------+----------------------+-----------------------+------------------------+-----------------------+-----------------------+


Recordings
^^^^^^^^^^^

+---------------------+----------------------+-----------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data        | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+=============================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*(732)$                   |                       |                        | 0                     | 5                     |
+---------------------+----------------------+-----------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                             |                       |                        | 0                     | 10                    |
+---------------------+----------------------+-----------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | pin_number=37775310         |                       |                        | 0                     | 15                    |
+---------------------+----------------------+-----------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | recording_slots=true        |                       |                        | 0                     | 20                    |
+---------------------+----------------------+-----------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | recording_prefix=recording  |                       |                        | 0                     | 25                    |
+---------------------+----------------------+-----------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | recordings.lua              |                       |                        | 0                     | 30                    |
+---------------------+----------------------+-----------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Call Privacy
^^^^^^^^^^^^^^

+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data            | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+=================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*67(\d+)$                     |                       |                        | 0                     | 5                     |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | privacy              | full                            |                       |                        | 0                     | 10                    |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | sip_h_Privacy=id                |                       |                        | 0                     | 15                    |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | privacy=yes                     |                       |                        | 0                     | 20                    |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | transfer             | $1 XML ${context}               |                       |                        | 0                     | 25                    |
+---------------------+----------------------+---------------------------------+-----------------------+------------------------+-----------------------+-----------------------+

Page
^^^^^^

+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                                                     | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+==========================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^\*724$                                                                  |                       |                        | 0                     | 5                     |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | caller_id_name=Page                                                      |                       |                        | 0                     | 10                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | caller_id_number=                                                        |                       |                        | 0                     | 15                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | pin_number=48760243                                                      |                       |                        | 0                     | 20                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | destinations=101-103,105                                                 |                       |                        | 0                     | 25                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | moderator=false                                                          |                       |                        | 0                     | 30                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | mute=true                                                                |                       |                        | 0                     | 35                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                  | set api_hangup_hook=conference page-${destination_number} kick all       |                       |                        | 0                     | 40                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | lua                  | page.lua                                                                 |                       |                        | 0                     | 45                    |
+---------------------+----------------------+--------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Valet Park In
^^^^^^^^^^^^^^^

+---------------------+----------------------+-------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                      | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+===========================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^(park\+)?(\*5900)$                       |                       |                        | 0                     | 5                     |
+---------------------+----------------------+-------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | valet_park           | park@${domain_name} auto in 5901 5999     |                       |                        | 0                     | 10                    |
+---------------------+----------------------+-------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Valet Park Out
^^^^^^^^^^^^^^^

+---------------------+----------------------+-------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type | Dialplan Detail Data                            | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+======================+=================================================+=======================+========================+=======================+=======================+
| condition           | destination_number   | ^(park\+)?\*(59[0-9][0-9])$                     |                       |                        | 0                     | 5                     |
+---------------------+----------------------+-------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | answer               |                                                 |                       |                        | 0                     | 10                    |
+---------------------+----------------------+-------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | valet_park           | park@${domain_name} $2                          |                       |                        | 0                     | 15                    |
+---------------------+----------------------+-------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+


Valet Parking
^^^^^^^^^^^^^^

+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| Dialplan Detail Tag | Dialplan Detail Type                                      | Dialplan Detail Data                                                                | Dialplan Detail Break | Dialplan Detail Inline | Dialplan Detail Group | Dialplan Detail Order |
+=====================+===========================================================+=====================================================================================+=======================+========================+=======================+=======================+
| condition           | destination_number                                        | ^(park\+)?(\*59[0-9][0-9])$                                                         | never                 |                        | 0                     | 5                     |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | ${sip_h_Referred-By}                                      | sip:(.*)@.*                                                                         | never                 |                        | 0                     | 10                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                                                       | referred_by_user=$1                                                                 |                       |                        | 0                     | 15                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number                                        | ^(park\+)?(\*59[0-9][0-9])$                                                         | never                 |                        | 1                     | 25                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                                                       | park_in_use=false                                                                   |                       | TRUE                   | 1                     | 30                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                                                       | park_lot=$2                                                                         |                       | TRUE                   | 1                     | 35                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | destination_number                                        | ^(park\+)?(\*59[0-9][0-9])$                                                         |                       |                        | 2                     | 45                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | ${cond ${sip_h_Referred-By} == '' ? false : true}         | TRUE                                                                                | never                 |                        | 2                     | 50                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | set                                                       | park_in_use=${regex ${valet_info park@${domain_name}}|${park_lot}}                  |                       | TRUE                   | 2                     | 55                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| condition           | ${park_in_use}                                            | TRUE                                                                                | never                 |                        | 3                     | 65                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| action              | transfer                                                  | ${referred_by_user} XML ${context}                                                  |                       |                        | 3                     | 70                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | set                                                       | valet_parking_timeout=180                                                           |                       |                        | 3                     | 75                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | set                                                       | valet_hold_music=${hold_music}                                                      |                       |                        | 3                     | 80                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | set                                                       | valet_parking_orbit_exten=${referred_by_user}                                       |                       |                        | 3                     | 85                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
| anti-action         | valet_park                                                | park@${domain_name} ${park_lot}                                                     |                       |                        | 3                     | 90                    |
+---------------------+-----------------------------------------------------------+-------------------------------------------------------------------------------------+-----------------------+------------------------+-----------------------+-----------------------+
